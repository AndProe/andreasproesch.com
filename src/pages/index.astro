---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/BlogCard.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog', ({ data }) => !data.draft);
const recentPosts = allPosts
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<BaseLayout title="Home">
  <section class="hero">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">Andreas Proesch</h1>
        <p class="hero-subtitle">Technology Leader, Speaker & Writer</p>
        <p class="hero-description">
          I help organizations navigate digital transformation, build high-performing teams,
          and create technology strategies that drive real business outcomes.
        </p>
        <div class="hero-cta">
          <a href="/about" class="btn">Learn More</a>
          <a href="/contact" class="btn btn-outline">Get in Touch</a>
        </div>
      </div>
      <div class="hero-image">
        <div class="image-placeholder">
          <span>Your Photo</span>
        </div>
      </div>
    </div>
  </section>

  <section class="section featured">
    <h2 class="section-title">What I Do</h2>
    <div class="grid grid-3">
      <div class="feature-card">
        <div class="feature-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        </div>
        <h3>Leadership</h3>
        <p>Building and mentoring high-performing engineering teams that deliver exceptional results.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="12 2 2 7 12 12 22 7 12 2"/>
            <polyline points="2 17 12 22 22 17"/>
            <polyline points="2 12 12 17 22 12"/>
          </svg>
        </div>
        <h3>Strategy</h3>
        <p>Developing technology roadmaps that align with business objectives and drive growth.</p>
      </div>
      <div class="feature-card">
        <div class="feature-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 19l7-7 3 3-7 7-3-3z"/>
            <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
            <path d="M2 2l7.586 7.586"/>
            <circle cx="11" cy="11" r="2"/>
          </svg>
        </div>
        <h3>Speaking</h3>
        <p>Sharing insights at conferences and events on technology leadership and innovation.</p>
      </div>
    </div>
  </section>

  {recentPosts.length > 0 && (
    <section class="section recent-posts">
      <div class="section-header">
        <h2 class="section-title">Recent Posts</h2>
        <a href="/blog" class="view-all">View all &rarr;</a>
      </div>
      <div class="grid grid-3">
        {recentPosts.map(post => (
          <BlogCard
            title={post.data.title}
            date={post.data.date}
            description={post.data.description}
            slug={post.id}
            image={post.data.image}
          />
        ))}
      </div>
    </section>
  )}

  <section class="section cta-section">
    <div class="cta-content">
      <h2>Let's Work Together</h2>
      <p>Interested in collaborating or having me speak at your event?</p>
      <a href="/contact" class="btn">Get in Touch</a>
    </div>
  </section>
</BaseLayout>

<style>
  .hero {
    padding: var(--spacing-2xl) 0;
  }

  .hero-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2xl);
    align-items: center;
  }

  .hero-title {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: var(--spacing-xs);
    background: linear-gradient(135deg, var(--color-text) 0%, var(--color-text-muted) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .hero-subtitle {
    font-size: 1.5rem;
    color: var(--color-accent);
    font-weight: 500;
    margin-bottom: var(--spacing-md);
  }

  .hero-description {
    font-size: 1.1rem;
    color: var(--color-text-muted);
    line-height: 1.7;
    margin-bottom: var(--spacing-lg);
    max-width: 500px;
  }

  .hero-cta {
    display: flex;
    gap: var(--spacing-sm);
  }

  .hero-image {
    display: flex;
    justify-content: center;
  }

  .image-placeholder {
    width: 350px;
    height: 400px;
    background: var(--color-bg-secondary);
    border: 2px dashed var(--color-border);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text-muted);
    font-size: 1.1rem;
  }

  .featured {
    border-top: 1px solid var(--color-border);
  }

  .feature-card {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: var(--spacing-lg);
    transition: all 0.3s ease;
  }

  .feature-card:hover {
    border-color: var(--color-accent);
    transform: translateY(-4px);
  }

  .feature-icon {
    width: 56px;
    height: 56px;
    background: rgba(99, 102, 241, 0.1);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-accent);
    margin-bottom: var(--spacing-md);
  }

  .feature-card h3 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-xs);
  }

  .feature-card p {
    color: var(--color-text-muted);
    font-size: 0.95rem;
    margin: 0;
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-lg);
  }

  .section-header .section-title {
    margin-bottom: 0;
  }

  .view-all {
    font-size: 0.95rem;
    font-weight: 500;
  }

  .cta-section {
    border-top: 1px solid var(--color-border);
  }

  .cta-content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .cta-content h2 {
    font-size: 2rem;
    margin-bottom: var(--spacing-sm);
  }

  .cta-content p {
    color: var(--color-text-muted);
    font-size: 1.1rem;
    margin-bottom: var(--spacing-lg);
  }

  @media (max-width: 768px) {
    .hero-content {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .hero-title {
      font-size: 2.5rem;
    }

    .hero-subtitle {
      font-size: 1.25rem;
    }

    .hero-description {
      max-width: 100%;
    }

    .hero-cta {
      justify-content: center;
    }

    .hero-image {
      order: -1;
    }

    .image-placeholder {
      width: 250px;
      height: 300px;
    }
  }
</style>
